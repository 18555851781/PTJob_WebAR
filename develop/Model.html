<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <title>
        Model
    </title>
    <script src="../three.js/examples/vendor/three.js/build/three.js"></script>
    <script src="../three.js/examples/vendor/three.js/examples/js/loaders/GLTFLoader.js"></script>
    <script src="../three.js/examples/vendor/three.js/examples/js/controls/OrbitControls.js"></script>
    <script src="../three.js/examples/vendor/three.js/examples/js/loaders/OBJLoader.js"></script>
    <script src="../three.js/examples/vendor/three.js/examples/js/loaders/MTLLoader.js"></script>

    <style>
        *{
            padding: 0;
            margin: 0;
        }
        .UI_Body{
            position: fixed;
        }
        .Text{
            position: fixed;
            width: 265px;
            left: 0%;
            bottom: 0%;
            font-size: x-small;
            margin: 5px;
        }
        .Image{
            position: fixed;
            bottom: 0%;
            right: 0%;
            width: 110px;
            height: 84px;
        }
        .Mask{
            position: fixed;
            width: 100%;
            height: 100%;
        }
        .Load{
            position: fixed;
            top: 0%;
            left: 0%;
            width: 100%;
            height: 80%;
        }

    </style>
</head>
<body>
    <div class="UI_Body">
        <div class="UI">
            <img src="../Model/Texture/WechatIMG129.png" class="Image">
            <p class="Text">拨浪鼓是一种古老又传统的民间乐器和玩具，出现于战国时期。拨浪鼓的主体是一面小鼓，两侧缀有两枚弹丸，鼓下有柄，转动鼓柄弹丸击鼓发出声音。鼓身可以是木的也可以是竹的，还有泥的、硬纸的；鼓面用羊皮、牛皮、蛇皮或纸制成，其中以木身羊皮面的拨浪鼓最为典型。</p>
            <div id="Mask" class="Mask">
                <img src="../Model/Texture/BLG.jpg" class="Load">
            </div>
        </div>
        <div class="Display">
            <script>

                function init() {
                    var scene = new THREE.Scene();

                    var camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
                    camera.position.z = 5;

                    var pointlight = new THREE.PointLight(0xffffff,2);
                    pointlight.position.set(-10,10,-10);
                    scene.add(pointlight);

                    var pointlight_2 = new THREE.PointLight(0xffffff,2);
                    pointlight_2.position.set(-10,10,10);
                    scene.add(pointlight_2);

                    var renderer = new THREE.WebGLRenderer();
                    renderer.setSize(window.innerWidth,window.innerHeight);
                    renderer.setClearColor(new THREE.Color(0xffffff),1.0);
                    //  重要！！！将元素渲染到html元素上 否则不显示
                    var dom_renderer=renderer.domElement;
                    document.body.appendChild(dom_renderer);
                    //document.getElementById("Mask").appendChild(renderer.domElement);

                    //  添加加载图片
                    function LoadDisplay()
                    {
                        var Mask = document.getElementById("Mask");
                        Mask.style.display = "none";
                    }

                    //  禁止下拉刷新
                    function NoPull() {
                        document.body.addEventListener('touchmove',(e)=>
                            {e.preventDefault();},
                            {passive : false}
                        )
                    }

                    NoPull();
                    // var geometry = new THREE.BoxGeometry(1,1,1);
                    // var material = new THREE.MeshBasicMaterial({color: 0x00ff00});
                    // var cube = new THREE.Mesh(geometry,material);
                    // scene.add(cube);

                    // var loader = new THREE.GLTFLoader();
                    // loader.load('../Model/blg.gltf',function (gltf) {
                    //     scene.add(gltf.scene);
                    //
                    // },undefined,function (error) {
                    //     console.log(error);
                    // })

                    // var loader = new THREE.MTLLoader();
                    // loader.load('../Model/OBJ/BLG.mtl',function () {
                    //
                    // })

                    var loader = new THREE.MTLLoader();
                    loader.setPath('../Model/OBJ/');
                    loader.setTexturePath('../Model/OBJ/');
                    loader.load('BLG.mtl',function (material) {
                        console.log(material);
                        //  预加载
                        material.preload();

                        var objloader = new THREE.OBJLoader();
                        objloader.setMaterials(material);
                        objloader.setPath('../Model/OBJ/');
                        objloader.load('BLG.obj',function (obj) {
                            obj.scale.set(0.3,0.3,0.3);
                            obj.position.set(0,-2,0);
                            scene.add(obj);
                            LoadDisplay();
                        })
                    })
                    camera.lookAt(scene.position);

                    var control = new THREE.OrbitControls(camera);
                    control.autoRotate = true;

                    function render()
                    {
                        requestAnimationFrame(render);
                        renderer.render(scene,camera);
                    }
                    render();
                }
                window.onload = init;

            </script>
        </div>
    </div>
</body>
</html>